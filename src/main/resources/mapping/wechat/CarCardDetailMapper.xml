<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.springbootdemo.dao.CarCardDetailMapper">
  <!--<resultMap id="BaseResultMap" type="com.example.springbootdemo.pojo.CarCardDetail">-->
    <!--&lt;!&ndash;-->
      <!--WARNING - @mbg.generated-->
      <!--This element is automatically generated by MyBatis Generator, do not modify.-->
    <!--&ndash;&gt;-->
    <!--<result column="region" jdbcType="VARCHAR" property="region" />-->
    <!--<result column="province" jdbcType="VARCHAR" property="province" />-->
    <!--<result column="city" jdbcType="VARCHAR" property="city" />-->
    <!--<result column="create_time" jdbcType="TIMESTAMP" property="createTime" />-->
    <!--<result column="yuy_type" jdbcType="VARCHAR" property="yuyType" />-->
    <!--<result column="card_no" jdbcType="VARCHAR" property="cardNo" />-->
    <!--<result column="on_card_time" jdbcType="TIMESTAMP" property="onCardTime" />-->
    <!--<result column="wechat_id" jdbcType="VARCHAR" property="wechatId" />-->
    <!--<result column="yuy_username" jdbcType="VARCHAR" property="yuyUsername" />-->
  <!--</resultMap>-->
  <insert id="insertCardMess" parameterType="java.util.Map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into wx_car_mess (id, user_name, wechat_id,
    create_time, cjr_name, six,
    age, cert_no, phone,
    address, gyr_name, gyr_phone,
    gyr_certNo, gyr_address, xcz_no,
    jx_brand, jx_type, jx_xh,
    zhiz_changshang, fdj_glv, chuc_no,
    guoc_or_jink, fdj_pail, fdj_xingh,
    chand_rongl, user_nianx, fdj_no,
    chuc_date, jiq_color, jiq_zhil,
    goumai_date, money, xingz_fs,
    ranyou_type, waixing_chicun, cheliang_sb_code,
    bussins_user_type, user_mess_name, user_mess_certNo,
    hyjs_ser_zgz, zhengshu_code, shifou_jnshebao,
    shifou_jnsheb, shifou_czh, card_no,on_card_type,aduit_type,yuy_type
    )
    values (#{id,jdbcType=INTEGER}, #{userName,jdbcType=VARCHAR}, #{wechatId,jdbcType=VARCHAR},
    #{createTime,jdbcType=TIMESTAMP}, #{cjrName,jdbcType=VARCHAR}, #{six,jdbcType=INTEGER},
    #{age,jdbcType=INTEGER}, #{certNo,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR},
    #{address,jdbcType=VARCHAR}, #{gyrName,jdbcType=VARCHAR}, #{gyrPhone,jdbcType=VARCHAR},
    #{gyrCertno,jdbcType=VARCHAR}, #{gyrAddress,jdbcType=VARCHAR}, #{xczNo,jdbcType=VARCHAR},
    #{jxBrand,jdbcType=VARCHAR}, #{jxType,jdbcType=VARCHAR}, #{jxXh,jdbcType=VARCHAR},
    #{zhizChangshang,jdbcType=VARCHAR}, #{fdjGlv,jdbcType=VARCHAR}, #{chucNo,jdbcType=VARCHAR},
    #{guocOrJink,jdbcType=VARCHAR}, #{fdjPail,jdbcType=VARCHAR}, #{fdjXingh,jdbcType=VARCHAR},
    #{chandRongl,jdbcType=VARCHAR}, #{userNianx,jdbcType=VARCHAR}, #{fdjNo,jdbcType=VARCHAR},
    #{chucDate,jdbcType=DATE}, #{jiqColor,jdbcType=VARCHAR}, #{jiqZhil,jdbcType=VARCHAR},
    #{goumaiDate,jdbcType=DATE}, #{money,jdbcType=DECIMAL}, #{xingzFs,jdbcType=VARCHAR},
    #{ranyouType,jdbcType=VARCHAR}, #{waixingChicun,jdbcType=VARCHAR}, #{cheliangSbCode,jdbcType=VARCHAR},
    #{bussinsUserType,jdbcType=VARCHAR}, #{userMessName,jdbcType=VARCHAR}, #{userMessCertno,jdbcType=VARCHAR},
    #{hyjsSerZgz,jdbcType=INTEGER}, #{zhengshuCode,jdbcType=VARCHAR}, #{shifouJnshebao,jdbcType=INTEGER},
    #{shifouJnsheb,jdbcType=INTEGER}, #{shifouCzh,jdbcType=INTEGER}, #{cardNo,jdbcType=VARCHAR},'0','0','1'
    )
  </insert>

  <select id="findCardMess" parameterType="java.lang.String" resultType="com.example.springbootdemo.pojo.CarMessDetail">
        select * from wx_car_mess
         where wechat_id = #{wechatId}
         and on_card_type = '1'
         and aduit_type = '1'
         and yuy_type = '0'
  </select>

  <select id="cardIsNo" parameterType="java.lang.String" resultType="java.lang.Integer">
        select count(*) from wx_car_mess
         where wechat_id = #{wechatId}

  </select>


  <select id="findCardDetail" parameterType="java.lang.String" resultType="java.lang.String">
        select card_no from wx_car_card
          where  yuy_type ='0'
  </select>

  <update id="updateCardMess" parameterType="java.util.Map">
        update wx_car_mess set yuy_type = '1',yuy_card = #{cardNo}
          where wechat_id = #{wechatId}
            and id = #{carInfoId}
  </update>

  <update id="updateCard" parameterType="java.util.Map">
        update wx_car_card set yuy_type = '1',
        wechat_id = #{wechatId}
        where card_no = #{cardNo}
  </update>

  <insert id="insert" parameterType="java.util.Map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into car_card_detail (region, province, city, 
      create_time, yuy_type, card_no, 
      on_card_time, wechat_id, yuy_username
      )
    values (#{region,jdbcType=VARCHAR}, #{province,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR}, 
      #{createTime,jdbcType=TIMESTAMP}, #{yuyType,jdbcType=VARCHAR}, #{cardNo,jdbcType=VARCHAR}, 
      #{onCardTime,jdbcType=TIMESTAMP}, #{wechatId,jdbcType=VARCHAR}, #{yuyUsername,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.example.springbootdemo.pojo.CarCardDetail">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into car_card_detail
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="region != null">
        region,
      </if>
      <if test="province != null">
        province,
      </if>
      <if test="city != null">
        city,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="yuyType != null">
        yuy_type,
      </if>
      <if test="cardNo != null">
        card_no,
      </if>
      <if test="onCardTime != null">
        on_card_time,
      </if>
      <if test="wechatId != null">
        wechat_id,
      </if>
      <if test="yuyUsername != null">
        yuy_username,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="region != null">
        #{region,jdbcType=VARCHAR},
      </if>
      <if test="province != null">
        #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null">
        #{city,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="yuyType != null">
        #{yuyType,jdbcType=VARCHAR},
      </if>
      <if test="cardNo != null">
        #{cardNo,jdbcType=VARCHAR},
      </if>
      <if test="onCardTime != null">
        #{onCardTime,jdbcType=TIMESTAMP},
      </if>
      <if test="wechatId != null">
        #{wechatId,jdbcType=VARCHAR},
      </if>
      <if test="yuyUsername != null">
        #{yuyUsername,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
</mapper>